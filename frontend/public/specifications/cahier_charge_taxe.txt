       ğŸ—ï¸
       Taxe
           Type                       Brief

           Technologie                Next      React       Symfony

           Version                    v0



       Introduction

       RÃ©alisez un site de paiement dâ€™une taxe, contravention ou impÃ´t. Libre Ã  vous de dÃ©cider la nature du service
       (service des impÃ´ts stellaires, service des contraventions du Mordor, police de Johtoâ€¦).
       Dans les faits, suite Ã  la rÃ©ception dâ€™un courrier provenant de vos services, lâ€™utilisateur se rend sur votre site pour
       rÃ©gler une somme qui lui est rÃ©clamÃ©e, quelle qu'en soit la raison.



       Pour la rÃ©alisation de ce projet, vous travaillez en Ã©troite collaboration avec lâ€™entreprise E-corp, qui insiste sur la
       nÃ©cessitÃ© de respecter les meilleures pratiques de dÃ©veloppement. Vous devrez rÃ©aliser une application simple
       mais rÃ©pondant Ã  des critÃ¨res de qualitÃ©, comme la sÃ©curitÃ© de vos utilisateurs et la robustesse de votre systÃ¨me.



        FonctionnalitÃ©                        Information

        SystÃ¨me dâ€™authentification            Un systÃ¨me dâ€™authentification pour les utilisateurs.

                                              Formulaire de soumission dâ€™un rÃ¨glement accompagnÃ© dâ€™un
        Soumission et paiement
                                              paiement.

        Consultation des rÃ¨glements           Page de liste des rÃ¨glements effectuÃ©s

        Administration du profil              Page de profil pour administrer ses donnÃ©es

        Tests                                 Plan de test de lâ€™authentification + logique mÃ©tier.

        Fixtures                              Fausses donnÃ©es Ã  initialiser au dÃ©marrage du projet.

        Mailing                               Envoie de mail de confirmation de rÃ¨glement.



       1. Lâ€™utilisateur est invitÃ© Ã  se connecter ou crÃ©er un compte dÃ¨s son arrivÃ©e sur le site.

       2. Lorsque lâ€™utilisateur est authentifiÃ©, il peut accÃ©der Ã  sa page de profil oÃ¹ il retrouve lâ€™ensemble de ses
          informations personnelles, avec la possibilitÃ© de les Ã©diter.

       3. Lâ€™utilisateur peut accÃ©der Ã  une page de formulaire destinÃ©e Ã  recueillir les informations nÃ©cessaires au
          rÃ¨glement qui lui est rÃ©clamÃ©.

       4. Lorsque lâ€™utilisateur a soumis sa demande de rÃ¨glement, un email de confirmation lui est envoyÃ©.

       5. Lâ€™utilisateur peut consulter lâ€™ensemble de ses rÃ¨glements sur une page de liste.




       Architecture



Taxe                                                                                                                             1
       Le projet est composÃ© dâ€™un backend en Symfony et dâ€™un frontend en Next. Lâ€™application Symfony met Ã 
       disposition une API REST, consommÃ©e par lâ€™application frontend.



       Il est conseillÃ© dâ€™utiliser la librairie API Platform pour mettre en place votre API REST. Cela vous est dâ€™autant plus
       recommandÃ© que vous devrez gÃ©rer lâ€™authentification de vos utilisateurs Ã  lâ€™aide de JWToken, qui sâ€™intÃ¨gre trÃ¨s
       bien avec API Platform.




       Authentification
       Un systÃ¨me dâ€™authentification permet aux utilisateurs de sâ€™inscrire et de se connecter. Toute lâ€™authentification se
       fait via lâ€™utilisation de tokens JWT. Ces derniers permettront de respecter les principes REST de lâ€™API.



       Les tokens devront avoir une durÃ©e de validitÃ© dâ€™une heure maximum.




       SÃ©curitÃ©
       Les donnÃ©es rÃ©cupÃ©rÃ©es via les formulaires sont contrÃ´lÃ©es cÃ´tÃ© frontend et cÃ´tÃ© backend. Les messages
       dâ€™erreurs adÃ©quats sont affichÃ©s si nÃ©cessaire.



       Les routes API doivent Ãªtre administrÃ©es de sorte quâ€™aucune route sensible ou non indispensable ne puisse Ãªtre
       exploitÃ©e par lâ€™utilisateur.



       Toutes les contraintes mises en place dans les formulaires devront Ãªtre listÃ©es dans un tableau qui sera transmis
       Ã  E-corp Ã  lâ€™issue du dÃ©veloppement.




       Robustesse
       Le code mÃ©tier de lâ€™application ainsi que le systÃ¨me dâ€™authentification exploiteront des fonctions pures*
       regroupÃ©es sous forme de services. Ces fonctions seront couvertes par un plan de tests afin dâ€™assurer la
       robustesse du code.



       Tous les tests mis en place dans lâ€™application devront Ãªtre listÃ©s dans un tableau qui sera transmis Ã  E-corp Ã 
       lâ€™issue du dÃ©veloppement.


       Le code mÃ©tier est uniquement exÃ©cutÃ© dans la partie backend de lâ€™application. La partie frontend est une simple
       interface permettant lâ€™interaction entre lâ€™utilisateur et le backend.


       Fonction pure : La fonction reÃ§oit des arguments en entrÃ©e et retourne le rÃ©sultat du traitement effectuÃ©. Elle
       fournira toujours le mÃªme retour pour les mÃªmes arguments dâ€™entrÃ©e.


       Formulaire de rÃ¨glement
       Le formulaire peut Ãªtre ajustÃ© Ã  vos besoins mais contiendra Ã  minima les champs du tableau ci-dessous.



        Champ                              Information

        NÂ° dâ€™identification de rÃ¨glement   Le numÃ©ro unique du rÃ¨glement, voir chapitre plus bas.

        Nom                                Nom de lâ€™utilisateur.




Taxe                                                                                                                            2
        Champ                            Information

        PrÃ©nom                           PrÃ©nom(s) de lâ€™utilisateurs, prÃ©voir plusieurs champs.

        Adresse                          Adresse de lâ€™utilisateur.

        NÂ° de tÃ©lÃ©phone                  NumÃ©ro de lâ€™utilisateur.

        Email                            Adresse email de lâ€™utilisateur.

        NÂ° de carte bancaire             16 chiffres de la carte bancaire.

        Cryptogramme                     Cryptogramme de la carte bancaire.

        Date dâ€™expiration                Date dâ€™expiration de la carte bancaire.




       NumÃ©ro dâ€™identification de rÃ¨glement
       Câ€™est un numÃ©ro unique qui est indiquÃ© sur le papier reÃ§u par lâ€™utilisateur. Câ€™est Ã  lâ€™aide de ce numÃ©ro quâ€™il indique
       Ã  vos services le rÃ¨glement quâ€™il souhaite effectuer. GrÃ¢ce Ã  ce numÃ©ro, il retrouve le montant Ã  payer ainsi que la
       demande associÃ©e dans le formulaire de rÃ¨glement.



       Exemple de parcours utilisateur :

       1. Je mâ€™authentifie sur la plateforme.

       2. Je saisis le numÃ©ro de rÃ¨glement dans la page adÃ©quate.

       3. Je suis redirigÃ© vers le formulaire de rÃ¨glement concernÃ©, oÃ¹ je retrouve lâ€™ensemble des informations du
          rÃ¨glement demandÃ© ainsi que le formulaire Ã  remplir pour rÃ©gler ce qui est dÃ».



       Les numÃ©ros sont composÃ©s dâ€™une suite de chiffres et de lettres respectant cette structure :

           2 lettres, la premiÃ¨re est nÃ©cessairement devant la seconde dans lâ€™alphabet

           lâ€™annÃ©e en cours

           2 chiffres sÃ©parÃ©s par un underscore et qui, une fois additionnÃ©s, sont nÃ©cessairement Ã©gaux Ã  100.



       Exemples :

           KW2024_22_78 // OK

           AB2024_17_83 // OK

           YZ2024_1_99 // OK

           ZA2024_22_78 // KO

           AB2023_17_83 // KO

           YZ2024_2_99 // KO




       VÃ©rification du moyen de paiement
       Vos services ne sont pas habilitÃ©s Ã  prÃ©lever le contribuable, vous Ãªtes mandatÃ©s pour rÃ©cupÃ©rer les demandes
       de rÃ¨glements pour le compte de E-corp. De ce fait, les utilisateurs ne paient pas Ã  proprement parler, ils vous
       fournissent leurs informations bancaires pour que votre client puisse effectuer les prÃ©lÃ¨vements.



       NÃ©anmoins, il est de votre responsabilitÃ© dâ€™assurer la conformitÃ© des informations bancaires soumises par
       lâ€™utilisateur. Au mÃªme titre que le numÃ©ro dâ€™identification de rÃ¨glement, il sera nÃ©cessaire dâ€™effectuer une
       vÃ©rification du moyen de paiement grÃ¢ce Ã  lâ€™algorithme de Luhn.




Taxe                                                                                                                            3
       Cet algorithme, dont vous trouverez toutes les informations nÃ©cessaires sur Internet, permet de vÃ©rifier que le
       code de la carte bancaire respecte un modÃ¨le prÃ©cis afin de limiter la fraude. Vous devrez Ã©galement vÃ©rifier la
       date dâ€™expiration du moyen de paiement.




Taxe                                                                                                                      4
